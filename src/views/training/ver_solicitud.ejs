<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Detalle de Solicitud</title>
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gray-100 h-screen flex">

  <!-- Sidebar -->
  <%- include('../partials/sidebar') %>

  <!-- Contenido Principal -->
  <main class="flex-1 flex flex-col">
    <!-- Encabezado -->
    <div class="bg-stone-700 text-white p-4">
      <h1 class="text-2xl font-bold">Detalle de Solicitud: <span id="solicitudId">12345</span></h1>
      <p class="text-sm">Fecha de creación: <span id="fechaCreacion">20/11/2024</span></p>
    </div>

    <!-- Contenido -->
    <div class="flex-1 overflow-y-auto p-6">
      <!-- Información General -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Información General</h2>
        <div class="grid grid-cols-2 gap-4">
          <div>
            <p class="text-gray-600 font-medium">Solicitante:</p>
            <p class="text-gray-800" id="solicitante">Juan Pérez</p>
          </div>
          <div>
            <p class="text-gray-600 font-medium">Estado:</p>
            <p class="text-gray-800" id="estado">En proceso</p>
          </div>
          <div>
            <p class="text-gray-600 font-medium">Tipo de Solicitud:</p>
            <p class="text-gray-800" id="tipoSolicitud">Compra de material</p>
          </div>
          <div>
            <p class="text-gray-600 font-medium">Prioridad:</p>
            <p class="text-gray-800" id="prioridad">Alta</p>
          </div>
        </div>
      </div>

      <!-- Detalles -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Detalles de la Solicitud</h2>
        <p class="text-gray-800" id="detalles">
          Solicitud de compra de materiales para el proyecto XYZ. Incluye insumos para el área de construcción.
        </p>
      </div>

      <!-- Tabla de Ítems Relacionados -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Ítems Relacionados</h2>
        <div class="overflow-x-auto">
          <table class="min-w-full border border-gray-200 bg-white rounded-lg">
            <thead class="bg-gray-100">
              <tr>
                <th class="px-6 py-3 text-left text-sm font-medium text-gray-600 border-b">#</th>
                <th class="px-6 py-3 text-left text-sm font-medium text-gray-600 border-b">Descripción</th>
                <th class="px-6 py-3 text-left text-sm font-medium text-gray-600 border-b">Cantidad</th>
                <th class="px-6 py-3 text-left text-sm font-medium text-gray-600 border-b">Precio Unitario</th>
                <th class="px-6 py-3 text-left text-sm font-medium text-gray-600 border-b">Subtotal</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">1</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">Cemento Portland</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">50</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$10.00</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$500.00</td>
              </tr>
              <tr>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">2</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">Disco Duro SSD</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">50</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$10.00</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$500.00</td>
              </tr>
              <tr>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">3</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">Telefono XIAOMI</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">50</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$10.00</td>
                <td class="px-6 py-4 text-sm text-gray-800 border-b">$500.00</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- Archivos Adjuntos -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Archivos Adjuntos</h2>
        <ul class="list-disc pl-6">
          <li><a href="#" class="text-blue-600 hover:underline">Orden_de_Compra.pdf</a></li>
          <li><a href="#" class="text-blue-600 hover:underline">Especificaciones.docx</a></li>
        </ul>
      </div>

      <!-- Historial de Actividades -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Historial de Actividades</h2>
        <div class="bg-gray-50 border border-gray-200 rounded-lg p-4">
          <p class="text-sm text-gray-600 mb-2">20/11/2024 10:30 AM - Solicitud creada por Juan Pérez.</p>
          <p class="text-sm text-gray-600 mb-2">20/11/2024 11:00 AM - Aprobación inicial por María López.</p>
        </div>
      </div>

      <!-- Comentarios -->
      <div class="mb-6">
        <h2 class="text-xl font-semibold mb-2">Comentarios</h2>
        <textarea class="w-full p-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500" rows="3" placeholder="Añadir un comentario..."></textarea>
        <button class="mt-3 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700">Enviar</button>
      </div>

      <!-- Botones de Acción -->
      <div class="flex-1 overflow-y-auto p-6">
        <!-- Botones de Acción -->
        <div class="flex justify-end space-x-4">
          <button onclick="aprobarSolicitud()" class="px-4 py-2 bg-green-500 text-white font-semibold rounded-lg shadow hover:bg-green-600 transition">
            Aprobar
          </button>
          <button onclick="rechazarSolicitud()" class="px-4 py-2 bg-red-500 text-white font-semibold rounded-lg shadow hover:bg-red-600 transition">
            Rechazar
          </button>
          <button onclick="cancelarSolicitud()" class="px-4 py-2 bg-gray-300 text-gray-800 font-semibold rounded-lg shadow hover:bg-gray-400 transition">
            Cancelar
          </button>
        </div>
      </div>
    </div>
  </main>

  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
  <script>
    function aprobarSolicitud() {
      Swal.fire({
        title: '¿Estás seguro?',
        text: "La solicitud será aprobada.",
        icon: 'success',
        showCancelButton: true,
        confirmButtonColor: '#38a169',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Sí, aprobar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire(
            'Aprobado',
            'La solicitud ha sido aprobada.',
            'success'
          );
        }
      });
    }

    function rechazarSolicitud() {
      Swal.fire({
        title: '¿Estás seguro?',
        text: "La solicitud será rechazada.",
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#d33',
        cancelButtonColor: '#38a169',
        confirmButtonText: 'Sí, rechazar',
        cancelButtonText: 'Cancelar'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire(
            'Rechazada',
            'La solicitud ha sido rechazada.',
            'error'
          );
        }
      });
    }

    function cancelarSolicitud() {
      Swal.fire({
        title: '¿Deseas cancelar la solicitud?',
        text: "Esta acción no se puede deshacer.",
        icon: 'info',
        showCancelButton: true,
        confirmButtonColor: '#6b7280',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Sí, cancelar',
        cancelButtonText: 'Volver'
      }).then((result) => {
        if (result.isConfirmed) {
          Swal.fire(
            'Cancelada',
            'La solicitud ha sido cancelada.',
            'info'
          );
        }
      });
    }
  </script>
</body>
</html>
